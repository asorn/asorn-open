var timeoutId;window.addEventListener("mousemove",function(e){document.querySelectorAll(".magical").forEach(t=>{t.querySelector(".show")||t.insertAdjacentHTML("beforeend","<div class='show'></div>");const n=t.getBoundingClientRect(),o=e.clientX-n.left,c=e.clientY-n.top;t.style.setProperty("--mouse-x",`${o}px`),t.style.setProperty("--mouse-y",`${c}px`);const i=t.querySelector(".show");i&&(i.style.opacity=o>=0&&o<=t.clientWidth&&c>=0&&c<=t.clientHeight?1:0)})}),document.addEventListener("DOMContentLoaded",function(){var e=document.getElementById("emailCopied");e&&e.addEventListener("click",function(){function e(){var e=document.getElementsByClassName("copied")[0];e.style.opacity=1,timeoutId=setTimeout(function(){e.style.opacity=0},1e3)}function t(t){var n=document.createElement("input");n.value=t,document.body.appendChild(n),n.select(),document.execCommand("copy"),document.body.removeChild(n),e()}clearTimeout(timeoutId),navigator.clipboard&&navigator.clipboard.writeText?navigator.clipboard.writeText(this.textContent).then(()=>{e()}).catch(e=>{console.error("复制失败:",e),t(this.textContent)}):t(this.textContent)})}),document.addEventListener("DOMContentLoaded",function(){function e(){o.classList.remove("active"),document.body.classList.remove("no-scroll"),setTimeout(()=>{const e=n.querySelectorAll("li");e.forEach(e=>{e.classList.remove("active-item"),e.classList.add("magical","btn")})},300)}const t=document.getElementById("main-menu").innerHTML,n=document.getElementById("menu-panel-content"),o=document.getElementById("menu-panel"),c=document.getElementById("menu-expand-child");n.innerHTML=t,c.addEventListener("click",function(){o.classList.add("active"),document.body.classList.add("no-scroll");const e=n.querySelectorAll("li");e.forEach(e=>{e.classList.remove("magical","btn"),e.classList.add("active-item")})});const i=document.querySelector(".menu-close-btn");i&&i.addEventListener("click",function(t){t.stopPropagation(),e()}),o.addEventListener("click",function(t){t.target.classList.contains("menu-close-btn")||e()}),window.addEventListener("resize",function(){window.innerWidth>968&&e()})}),document.addEventListener("DOMContentLoaded",()=>{function e(e,t){let n=0;return function(...o){const c=(new Date).getTime();c-n>=t&&(n=c,e.apply(this,o))}}function t(e,t,n){e.forEach(e=>{e.isIntersecting&&n(e.target,t)})}function n(){const e=window.innerHeight;a.forEach(t=>{const n=t.getBoundingClientRect();n.top<=.6*e&&n.bottom>=0?t.classList.add("active"):t.classList.remove("active")})}function o(){v||(h-=1,h<=-m.scrollWidth/2&&(h=0),m.style.transform=`translateX(${h}px)`),requestAnimationFrame(o)}const c=document.querySelectorAll(".eye");document.addEventListener("mousemove",e(e=>{c.forEach(t=>{const n=t.getBoundingClientRect(),o=n.left+n.width/2,c=n.top+n.height/2,i=Math.atan2(e.clientY-c,e.clientX-o),r=Math.min(n.width/4,n.height/4),l=t.querySelector(".pupil");l.style.transform=`translate(-50%, -50%) translate(${Math.cos(i)*r}px, ${Math.sin(i)*r}px)`})},16));const i=document.getElementById("headscrollbg");window.onscroll=function(){window.scrollY>0?(i.style.backdropFilter="blur(4px)",i.style.webkitBackdropFilter="blur(4px)"):(i.style.backdropFilter="blur(0px)",i.style.webkitBackdropFilter="blur(0px)")};const r=new IntersectionObserver((e,n)=>{t(e,n,(e,t)=>{e.classList.add("visible"),t.unobserve(e)})},{root:null,rootMargin:"0px",threshold:.02}),l=document.querySelectorAll(".load-pro");l.forEach(e=>{r.observe(e)});const s=new IntersectionObserver((e,n)=>{t(e,n,(e,t)=>{const n=e.getAttribute("data-cover-url"),o=e.querySelector(".b-front");if(o&&n){const c=new Image;c.src=n,c.onload=(()=>{o.style.backgroundImage=`url('${n}')`}),t.unobserve(e)}})},{root:null,rootMargin:"0px",threshold:.1}),d=document.querySelectorAll(".book-item");d.forEach(e=>{s.observe(e)});const a=document.querySelectorAll(".tool-list-item");window.addEventListener("DOMContentLoaded",n),window.addEventListener("scroll",n);const u=document.querySelector(".scroll-thumb");window.addEventListener("scroll",e(()=>{const e=window.scrollY/(document.documentElement.scrollHeight-window.innerHeight)*100;u.style.height=`${e}%`},16));const m=document.getElementById("rowScroll");let v=!1;m.innerHTML+=m.innerHTML;let h=0;o(),document.querySelectorAll(".review-item").forEach(e=>{e.addEventListener("mouseenter",()=>{v=!0,e.classList.add("hovered")}),e.addEventListener("mouseleave",()=>{v=!1,e.classList.remove("hovered")})})});